<ion-content class="bg-gray-50/30">
    <div class="max-w-4xl mx-auto px-6 py-16">

        <!-- Results Header -->
        <div
            class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 opacity-0 animate-slide-up animate-delay-1 transition-all">
            <div>
                <div class="flex items-center gap-2 mb-1">
                    <h1 class="text-2xl font-bold text-gray-900 tracking-tight">Live Results</h1>
                    <div class="flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-green-50 border border-green-100">
                        <div class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></div>
                        <span class="text-[9px] font-bold text-green-600 uppercase tracking-wider">Live</span>
                    </div>
                </div>
                <p class="text-xs text-gray-400 font-semibold tracking-wide uppercase">Student Union Elections 2024</p>
            </div>

            <div class="flex items-center gap-2">
                <button (click)="refreshResults()"
                    class="flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-100 rounded-xl text-gray-600 font-bold text-xs shadow-sm hover:bg-gray-50 transition-all">
                    <ion-icon name="refresh-outline" class="text-base"></ion-icon>
                    Pause
                </button>
                <button
                    class="flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-100 rounded-xl text-gray-600 font-bold text-xs shadow-sm hover:bg-gray-50 transition-all">
                    <ion-icon name="share-social-outline" class="text-base"></ion-icon>
                    Share
                </button>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="opacity-0 animate-slide-up animate-delay-2">
                <app-stat-card label="Total Votes" [value]="stats().totalVotes | number" icon="checkbox-outline"
                    colorClass="text-blue-600 bg-blue-50" dotColor="bg-blue-500" [isLive]="true"></app-stat-card>
            </div>
            <div class="opacity-0 animate-slide-up animate-delay-3">
                <app-stat-card label="Voter Turnout" [value]="stats().voterTurnout + '%'" icon="people-outline"
                    colorClass="text-emerald-600 bg-emerald-50"></app-stat-card>
            </div>
            <div class="opacity-0 animate-slide-up animate-delay-4">
                <app-stat-card label="Eligible Voters" [value]="stats().eligibleVoters | number"
                    icon="trending-up-outline" colorClass="text-orange-600 bg-orange-50"></app-stat-card>
            </div>
            <div class="opacity-0 animate-slide-up animate-delay-5">
                <app-stat-card label="Time Remaining" [value]="stats().timeRemaining" icon="time-outline"
                    colorClass="text-rose-600 bg-rose-50"></app-stat-card>
            </div>
        </div>

        <!-- Detailed Results Section -->
        <div
            class="bg-white border border-gray-100 rounded-3xl p-6 shadow-sm opacity-0 animate-slide-up animate-delay-6 transition-all">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-lg font-bold text-gray-900 tracking-tight">Student Union President</h2>
                <span class="text-[10px] text-gray-400 uppercase tracking-widest">Updated: {{
                    stats().lastUpdated }}</span>
            </div>

            <div class="space-y-6">
                @for (candidate of sortedCandidates(); track candidate.id; let i = $index) {
                <div class="opacity-0 animate-slide-up" [class]="'animate-delay-' + (i + 7)">
                    <app-result-card [candidate]="candidate" [totalVotes]="totalVotesCount()"
                        [rank]="i + 1"></app-result-card>
                </div>
                }
            </div>
        </div>
    </div>
</ion-content>